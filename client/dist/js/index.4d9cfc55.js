(function(e){function t(t){for(var r,n,o=t[0],c=t[1],l=t[2],d=0,m=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],r=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(r=!1)}r&&(a.splice(t--,1),e=n(n.s=s[0]))}return e}var r={},i={index:0},a=[];function n(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=r,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("9be5")},"01d2":function(e,t,s){},"056d":function(e,t,s){"use strict";s("dd5c")},"07ee":function(e,t,s){"use strict";s("7f8e")},1:function(e,t){},"2aff":function(e,t,s){"use strict";s("4c40")},"2dc1":function(e,t,s){"use strict";s("e559")},3569:function(e,t,s){},"3a72":function(e,t,s){"use strict";s("cbe1")},"4c40":function(e,t,s){},6027:function(e,t,s){},"739e":function(e,t,s){},"7f8e":function(e,t,s){},"81d7":function(e,t,s){},8274:function(e,t,s){e.exports=s.p+"img/home.6cfdea20.svg"},"87f6":function(e,t,s){},9697:function(e,t,s){},"97f2":function(e,t,s){"use strict";s("3569")},"983a":function(e,t,s){"use strict";s("6027")},"9be5":function(e,t,s){"use strict";s.r(t);var r=s("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("ServerList"),s("ChatList"),s("div",{attrs:{id:"main"}},[s("Titlebar",{attrs:{view:e.view,title:e.title}}),s("router-view")],1),s("Toast",{attrs:{toast:e.toastQueue[0]},on:{"next-toast":function(t){e.toastQueue=e.toastQueue.slice(1,e.toastQueue.length-1)}}})],1)},a=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{attrs:{id:"server-list"}},[s("div",{staticClass:"list"},[s("ServerButton",{attrs:{home:!0},on:{hover:e.showTooltip,leave:e.hideTooltip}}),s("div",{staticClass:"seperator"}),e._l(e.servers,(function(t){return s("ServerButton",{key:t.id,staticStyle:{"margin-bottom":"7px"},attrs:{server:t},on:{hover:e.showTooltip,leave:e.hideTooltip}})})),s("ServerButton",{attrs:{add:!0},on:{hover:e.showTooltip,leave:e.hideTooltip}})],2),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.tooltip,expression:"tooltip"}],ref:"tooltipElement",staticClass:"tooltip",style:{top:e.tooltipY+"px"}},[s("p",{staticClass:"leading-none"},[e._v(e._s(this.tooltipText))])])])],1)},o=[],c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"button",on:{mouseenter:function(t){return e.$emit("hover",[t,e.home?"Home":e.server.name||"Add a Server"])},mouseleave:function(t){return e.$emit("leave")}}},[r("div",{staticClass:"bar"}),r("div",{staticClass:"button__icon",style:{transform:e.home?"scale(1.07)":null,backgroundColor:e.add?"#12151C":null}},[e.home?r("img",{attrs:{src:s("8274"),alt:""}}):e.add?r("img",{staticClass:"add",attrs:{src:s("d12f"),alt:""}}):r("img",{attrs:{src:e.server.icon,alt:""}})])])},l=[],u={name:"ServerButton",props:{home:{type:Boolean,default:!1},add:{type:Boolean,default:!1},server:{type:Object,default(){return{}}}}},d=u,m=(s("f777"),s("2877")),h=Object(m["a"])(d,c,l,!1,null,"7f2bdba6",null),p=h.exports,f={name:"ServerList",components:{ServerButton:p},data(){return{tooltipY:0,tooltip:!1,tooltipText:"Home",servers:[]}},methods:{showTooltip(e){const t=e[0].target;this.tooltipText=e[1],this.tooltipY=t.getBoundingClientRect().top+t.clientHeight/2-(this.$refs.tooltipElement.clientHeight||34)/2,this.tooltip=!0},hideTooltip(){this.tooltip=!1}}},v=f,g=(s("97f2"),Object(m["a"])(v,n,o,!1,null,"19e4c06e",null)),C=g.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{attrs:{id:"channel-list"}},[e._m(0),s("div",{staticClass:"scroll-container"},[s("div",{staticClass:"scroll"},[s("div",{staticClass:"view-button-list"},[s("ViewButton",{attrs:{type:"friends",active:e.friends},on:{click:e.changeView}}),s("ViewButton",{attrs:{type:"library",active:e.library},on:{click:e.changeView}}),s("ViewButton",{attrs:{type:"nitro",active:e.nitro},on:{click:e.changeView}})],1),e._m(1),s("div",{staticClass:"dm-list"},e._l(e.dms,(function(t){return s("ViewButton",{key:t.id,attrs:{type:"dm",active:e.activeDm===t.id,dm:t},on:{click:e.changeView}})})),1)])]),s("div",{staticClass:"profile"},[s("div",{staticClass:"icon"},[e._v(e._s(e.user.username?e.user.username[0]:""))]),s("div",{staticClass:"details",class:{showTooltip:e.showTooltip},on:{click:e.copyUsername}},[s("h2",{staticClass:"name"},[e._v(e._s(e.user.username)+" ")]),s("h2",{staticClass:"hash"},[e._v("#"+e._s(e.user.hash))])]),s("div",{staticClass:"buttons"},[s("button",{staticClass:"settings"},[s("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.738 10H22v4h-2.261c-.241.931-.639 1.798-1.174 2.564L20 18l-2 2-1.435-1.436c-.768.535-1.633.934-2.565 1.174V22h-4v-2.262c-.931-.24-1.797-.639-2.564-1.174L6 20l-2-2 1.436-1.436c-.535-.765-.934-1.632-1.174-2.564H2v-4h2.262c.24-.932.638-1.798 1.174-2.564L4 6l2-2 1.436 1.436C8.202 4.9 9.068 4.502 10 4.262V2h4v2.261c.932.241 1.797.639 2.565 1.174L18 3.999l2 2-1.436 1.437c.535.766.934 1.633 1.174 2.564zM12 16c2.2091 0 4-1.7909 4-4 0-2.20914-1.7909-4-4-4-2.20914 0-4 1.79086-4 4 0 2.2091 1.79086 4 4 4z"}})])]),s("button",{staticClass:"deafen"},[s("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 24 24"}},[s("svg",{attrs:{width:"24",height:"24"}},[s("path",{attrs:{d:"M12 2.00305c-5.514 0-10 4.485-10 10.00005v8c0 1.104.895 2 2 2h2c1.104 0 2-.896 2-2v-3c0-1.104-.896-2-2-2H4v-3c0-4.41205 3.589-8.00005 8-8.00005s8 3.588 8 8.00005v3h-2c-1.104 0-2 .896-2 2v3c0 1.104.896 2 2 2h2c1.104 0 2-.896 2-2v-8c0-5.51505-4.486-10.00005-10-10.00005z",fill:"currentColor"}})])])]),s("button",{staticClass:"mute"},[s("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 24 24"}},[s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.99 11c0 1.66-1.33 3-2.99 3-1.66 0-3-1.34-3-3V5c0-1.66 1.34-3 3-3s3 1.34 3 3l-.01 6zM12 16.1c2.76 0 5.3-2.1 5.3-5.1H19c0 3.42-2.72 6.24-6 6.72V21h-2v-3.28c-3.28-.49-6-3.31-6-6.72h1.7c0 3 2.54 5.1 5.3 5.1zM12 4c-.8 0-1 .66667-1 1v6c0 .3333.2 1 1 1s1-.6667 1-1V5c0-.33333-.2-1-1-1z",fill:"currentColor"}}),s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.99 11c0 1.66-1.33 3-2.99 3-1.66 0-3-1.34-3-3V5c0-1.66 1.34-3 3-3s3 1.34 3 3l-.01 6zM12 16.1c2.76 0 5.3-2.1 5.3-5.1H19c0 3.42-2.72 6.24-6 6.72V22h-2v-4.28c-3.28-.49-6-3.31-6-6.72h1.7c0 3 2.54 5.1 5.3 5.1z",fill:"currentColor"}})])])])])])},b=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-container"},[s("button",{staticClass:"search"},[e._v("Find or start a conversation")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dm-heading"},[r("p",{staticClass:"title"},[e._v("DIRECT MESSAGES")]),r("button",[r("img",{attrs:{src:s("d12f"),alt:""}})])])}],w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-link",{staticClass:"view-btn",class:{active:e.active},attrs:{to:"/"+(e.dm.name?"chat":"friends"===e.type?"":e.type)},nativeOn:{click:function(t){return e.$emit("click",e.dm.id||e.type)},mouseenter:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}}},[r("div",{staticClass:"container"},["friends"===e.type?r("svg",{staticClass:"icon",attrs:{width:"16",height:"16",viewBox:"0 0 24 24"}},[r("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[r("path",{attrs:{fill:"currentColor","fill-rule":"nonzero",d:"M2.5 4v1.5c0 4.15 2.21 7.78 5.5 9.8V20h15v-2c0-2.66-5.33-4-8-4h-.25C10 14 6 10 6 5.5V4H2.5zM15 4c-2.209139 0-4 1.790861-4 4s1.790861 4 4 4 4-1.790861 4-4-1.790861-4-4-4z"}}),r("path",{attrs:{d:"M0 0h24v24H0V0zm0 0h24v24H0V0zm0 0h24v24H0V0z"}})])]):"library"===e.type?r("svg",{staticClass:"icon",attrs:{width:"24",height:"24"}},[r("path",{attrs:{fill:"currentColor",d:"M17 13.6h.3999992c1.6406743 0 3.0967818-.7902246 4.0084765-2.0108278l.4114004 7.2406477c.0939879 1.6541863-1.1708028 3.0713615-2.8249891 3.1653493A2.99996552 2.99996552 0 0118.8247069 22H5.1752931c-1.65685425 0-3-1.3431458-3-3 0-.056761.00161091-.1135105.00483077-.1701801l.41140038-7.2406467C3.503219 12.8097758 4.95932613 13.6 6.6 13.6H7V15h2v-1.4h6V15h2v-1.4zM7 16v2h2v-2H7zm8 0h2v2h-2v-2zm0-4.4H9V9H7v2.6h-.4c-1.65685425 0-3-1.3431458-3-3V5c0-1.65685425 1.34314575-3 3-3h10.7999992c1.6568543 0 3 1.34314575 3 3v3.6c0 1.6568542-1.3431457 3-3 3H17V9h-2v2.6z","fill-rule":"evenodd"}})]):"nitro"===e.type?r("svg",{staticClass:"icon",attrs:{width:"24",height:"24"}},[r("path",{attrs:{fill:"currentColor",d:"M2.98966977 9.35789159c0 .41793313-.35524031.76615501-.7815969.76615501h-.42635659c-.42635659 0-.78176744-.34822188-.78176744-.76615501s.35541085-.76615501.78176744-.76615501h.42635659c.42635659 0 .7815969.34822188.7815969.76615501zm19.25709453-.20896656c1.8474884 3.83110937.1420621 8.42837387-3.9083255 10.23936167-3.9081551 1.7414438-8.59807756.0697113-10.3746202-3.7613981-.35524031-.7661551-.5684186-1.6020213-.63953488-2.4378876H5.76091938c-.42635659 0-.7815969-.348389-.7815969-.7663222 0-.4179331.35524031-.766155.7815969-.766155h2.2740155c.42635659 0 .7815969-.3482219.7815969-.766155 0-.4179331-.35524031-.7663222-.7815969-.7663222h-3.624031c-.42635659 0-.78176745-.34822188-.78176745-.76615501s.35541086-.76615501.78176745-.76615501h5.04516279c.42635659 0 .78159693-.34838906.78159693-.76632219 0-.41793313-.35524034-.76615502-.78159693-.76615502H7.3954c-.63953488 0-1.20812403-.48764438-1.20812403-1.18408814 0-.6268997.49747287-1.18425532 1.20812403-1.18425532h8.0296589c2.8424341.13942249 5.5426357 1.74144377 6.8217054 4.45800912zm-8.9804682-.76836171c-2.2468992 1.01139818-3.232124 3.61679328-2.2003411 5.81930088 1.031783 2.2025076 3.68969 3.1682675 5.9365892 2.1568693 2.2470698-1.0113981 3.232124-3.6167933 2.2003411-5.8193009-1.031783-2.20250757-3.68969-3.16826745-5.9365892-2.15686928zm3.5799628 1.4649225l1.4211318 2.36834348c.0711163.1392553.0711163.2089665 0 .3482219l-1.4211318 2.3683434c-.0711163.1392553-.2131783.1392553-.2842946.1392553h-2.7713178c-.142062 0-.2131783-.0697112-.284124-.1392553l-1.4213023-2.3683434c-.0709458-.1392554-.0709458-.2089666 0-.3482219l1.4213023-2.36834348c.0709457-.13925532.2131783-.13925532.284124-.13925532h2.7713178c.1422326-.06971125.2131783 0 .2842946.13925532z"}})]):r("div",{staticClass:"icon",staticStyle:{"background-color":"rgb(44 51 66)","border-radius":"50%",transform:"scale(1.26)"}},[e._v(" "+e._s(e.dm.name[0])+" ")]),r("h1",[e._v(" "+e._s(e.dm.name?e.dm.name:"friends"===e.type?"Friends":"library"===e.type?"Library":"Nitro")+" ")]),e.dm.name?r("img",{staticClass:"close",attrs:{src:s("d12f"),alt:""}}):e._e()]),r("transition",{attrs:{name:"slide"}},[e.hover||e.active?r("div",{staticClass:"bar"}):e._e()])],1)},y=[],E={name:"ViewButton",data(){return{hover:!1}},props:{type:{type:String,default:""},active:{type:Boolean,default:!1},dm:{type:Object,default(){return{}}}}},$=E,I=(s("ed0c"),Object(m["a"])($,w,y,!1,null,"46c8e1b6",null)),S=I.exports,T={name:"ChannelList",components:{ViewButton:S},computed:{user(){return this.$store.state.user}},data(){return{friends:!0,library:!1,nitro:!1,activeDm:"",dms:[],showTooltip:!1}},methods:{changeView(e){this.friends=!1,this.library=!1,this.nitro=!1,this.activeDm="",void 0!==this[e]?this[e]=!0:this.activeDm=e},copyUsername(){this.showTooltip||(navigator.clipboard.writeText(this.user.username+"#"+this.user.hash),this.showTooltip=!0,setTimeout(()=>this.showTooltip=!1,2e3))}}},R=T,x=(s("b924"),Object(m["a"])(R,_,b,!1,null,"0ec3fd06",null)),O=x.exports,V=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{attrs:{id:"titlebar"}},[s("div",{staticClass:"content"},["friends"===e.view?s("svg",{staticClass:"title-icon",attrs:{width:"16",height:"16",viewBox:"0 0 24 24"}},[s("g",{attrs:{"data-v-70ba24e7":"",fill:"none","fill-rule":"evenodd"}},[s("path",{attrs:{"data-v-70ba24e7":"",fill:"currentColor","fill-rule":"nonzero",d:"M2.5 4v1.5c0 4.15 2.21 7.78 5.5 9.8V20h15v-2c0-2.66-5.33-4-8-4h-.25C10 14 6 10 6 5.5V4H2.5zM15 4c-2.209139 0-4 1.790861-4 4s1.790861 4 4 4 4-1.790861 4-4-1.790861-4-4-4z"}}),s("path",{attrs:{"data-v-70ba24e7":"",d:"M0 0h24v24H0V0zm0 0h24v24H0V0zm0 0h24v24H0V0z"}})])]):"dm"===e.view?s("svg",{staticClass:"title-icon",attrs:{width:"24",height:"24",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"M12 2C6.486 2 2 6.486 2 12C2 17.515 6.486 22 12 22C14.039 22 15.993 21.398 17.652 20.259L16.521 18.611C15.195 19.519 13.633 20 12 20C7.589 20 4 16.411 4 12C4 7.589 7.589 4 12 4C16.411 4 20 7.589 20 12V12.782C20 14.17 19.402 15 18.4 15L18.398 15.018C18.338 15.005 18.273 15 18.209 15H18C17.437 15 16.6 14.182 16.6 13.631V12C16.6 9.464 14.537 7.4 12 7.4C9.463 7.4 7.4 9.463 7.4 12C7.4 14.537 9.463 16.6 12 16.6C13.234 16.6 14.35 16.106 15.177 15.313C15.826 16.269 16.93 17 18 17L18.002 16.981C18.064 16.994 18.129 17 18.195 17H18.4C20.552 17 22 15.306 22 12.782V12C22 6.486 17.514 2 12 2ZM12 14.599C10.566 14.599 9.4 13.433 9.4 11.999C9.4 10.565 10.566 9.399 12 9.399C13.434 9.399 14.6 10.565 14.6 11.999C14.6 13.433 13.434 14.599 12 14.599Z"}})]):e._e(),s("h1",{staticClass:"title"},[e._v(e._s(this.title))]),"friends"===e.view?s("router-link",{staticClass:"add-btn title",attrs:{to:"/add-friend"}},[s("svg",{staticClass:"icon",attrs:{width:"24",height:"24"}},[s("path",{attrs:{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd",d:"M21 3h3v2h-3v3h-2V5h-3V3h3V0h2v3zm-11 9c2.205 0 4-1.795 4-4s-1.795-4-4-4-4 1.795-4 4 1.795 4 4 4zm0 1c-4.711 0-8 2.467-8 6v1h16v-1c0-3.533-3.289-6-8-6z"}})]),e._v(" Add Friend ")]):e._e()],1),s("div",{staticClass:"shadow"})])},M=[],A={name:"Titlebar",props:{view:{type:String,default:""},title:{type:String,default:""}}},k=A,D=(s("056d"),Object(m["a"])(k,V,M,!1,null,"66cbbf56",null)),j=D.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"toast",class:{error:e.toast.error,show:e.show}},[r("p",[e._v(e._s(e.toast.message))]),r("button",{on:{click:e.close}},[r("img",{attrs:{src:s("d12f"),alt:""}})])])},q=[],H={name:"Toast",data(){return{show:!1}},watch:{toast(){null===this.toast.error?this.show=!1:this.show=!0}},props:{toast:{type:Object,default(){return{error:null,message:null}},validator(e){return!(!Object.prototype.hasOwnProperty.call(e,"error")||!Object.prototype.hasOwnProperty.call(e,"message"))}}},methods:{close(){setTimeout(()=>{this.$emit("next-toast")},900),this.show=!1}}},z=H,B=(s("2aff"),Object(m["a"])(z,L,q,!1,null,"63d8a6c1",null)),F=B.exports,U={name:"App",components:{ServerList:C,ChatList:O,Titlebar:j,Toast:F},computed:{toastQueue:{get(){return this.$store.state.toastQueue},set(e){this.$store.commit("SET_TOAST_QUEUE",e)}}},data(){return{view:"friends",title:"Friends"}},beforeMount(){const e=s("8055");this.$store.state.SERVER_URL="https://discord-clone-freddie.herokuapp.com";const t=e(this.$store.state.SERVER_URL+"/",{withCredentials:!0});this.$store.state.socket=t,t.on("connect",()=>{console.log("connected to socket")}),t.on("disconnect",()=>{console.log("disconnected from socket")}),t.on("authenticated",e=>{console.log("authenticated"),this.$store.commit("SET_USER",e),"Friends"!==this.$route.name&&this.$router.push({name:"Friends"})}),t.on("not-authenticated",()=>{"Auth"!==this.$route.name&&this.$router.push({name:"Auth"})}),t.on("friend-request",e=>{console.log("friend-request"),this.$store.commit("ADD_FRIEND_REQUEST",e)}),t.on("answer-friend-request-response",e=>{this.$store.commit("ADD_TOAST",e),e.error||(e.accepted?this.$store.commit("ADD_FRIEND",e.friend):this.$store.commit("REMOVE_FRIEND_REQUEST",e.friend))}),t.on("pending-friend-request-accepted",e=>{this.$store.commit("ADD_FRIEND",e)}),t.on("remove-friend-response",e=>{"object"===typeof e?(this.$store.commit("REMOVE_FRIEND",e.userId),this.$store.commit("ADD_TOAST",e)):this.$store.commit("REMOVE_FRIEND",e)}),t.on("send-message-response",e=>{e.error&&this.$store.commit("ADD_TOAST",e)}),t.on("receive-message",e=>{this.$store.commit("RECEIVE_MESSAGE",e)}),t.on("fetch-messages-response",e=>{e.error?this.$store.commit("ADD_TOAST",e):this.$store.commit("SET_MESSAGES",e.messages)})}},N=U,P=(s("2dc1"),Object(m["a"])(N,i,a,!1,null,null,null)),Q=P.exports,Z=s("8c4f"),G=function(){var e=this,t=e.$createElement,s=e._self._c||t;return 0!==e.friends.length||0!==e.friendRequests.length?s("main",{attrs:{id:"friends"}},[0!==e.friends.length?s("div",[s("h2",{staticClass:"count"},[e._v("FRIENDS - "+e._s(e.friends.length))]),s("div",{staticClass:"friend-list"},e._l(e.friends,(function(t){return s("FriendButton",{key:t.id,attrs:{friend:t},on:{"open-chat":e.openChat,"remove-friend":e.removeFriend}})})),1)]):e._e(),0!==e.friendRequests.length?s("div",[s("h2",{staticClass:"count"},[e._v("REQUESTS - "+e._s(e.friendRequests.length))]),s("div",{staticClass:"friend-list"},e._l(e.friendRequests,(function(t){return s("FriendButton",{key:t.id,attrs:{friend:t,request:!0},on:{request:e.answerRequest}})})),1)]):e._e()]):s("main",{staticClass:"no-friends",attrs:{id:"friends"}},[s("h1",[e._v("Its feeling pretty lonely in here")]),s("h2",[e._v("How about inviting someone to the party?")])])},J=[],W=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"friend-container"},[r("div",{staticClass:"friend"},[r("div",{staticClass:"icon"},[e._v(e._s(e.friend.username[0]))]),r("div",{staticClass:"details"},[r("h3",{staticClass:"name"},[e._v(e._s(e.friend.username)),r("span",{staticClass:"hash"},[e._v("#"+e._s(e.friend.hash))])])]),r("div",{staticClass:"buttons"},[r("button",{staticClass:"message button",on:{click:function(t){e.request?e.$emit("request",{friend:e.friend,accept:!0}):e.$emit("open-chat",e.friend)}}},[e.request?r("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"}},[r("path",{attrs:{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.99991 16.17L4.82991 12L3.40991 13.41L8.99991 19L20.9999 7.00003L19.5899 5.59003L8.99991 16.17Z"}})]):r("svg",{attrs:{width:"24",height:"24",fill:"none"}},[r("path",{attrs:{fill:"currentColor",d:"M4.79805 3c-.9936 0-1.8.8055-1.8 1.8v10.8c0 .9936.8064 1.8 1.8 1.8h2.7V21l3.59995-3.6h8.1c.9945 0 1.8-.8064 1.8-1.8V4.8c0-.9945-.8055-1.8-1.8-1.8H4.79805z"}})])]),r("button",{staticClass:"more button",class:{request:e.request},on:{click:function(t){e.request?e.$emit("request",{friend:e.friend,accept:!1}):e.$emit("remove-friend",e.friend)}}},[e.request?r("img",{staticStyle:{filter:"brightness(5)",transform:"rotate(45deg)"},attrs:{src:s("d12f"),alt:""}}):r("svg",{staticStyle:{transform:"scale(.75)"},attrs:{width:"24",height:"24",viewBox:"0 0 24 24"}},[r("path",{attrs:{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.2949 0.298996L21.7089 1.713L19.4169 4.006L21.7089 6.299L20.2949 7.713L18.0019 5.42L15.7099 7.713L14.2949 6.299L16.5879 4.006L14.2949 1.713L15.7099 0.298996L18.0019 2.592L20.2949 0.298996ZM8.00195 13.006C10.207 13.006 12.002 11.211 12.002 9.006C12.002 6.801 10.207 5.006 8.00195 5.006C5.79695 5.006 4.00195 6.801 4.00195 9.006C4.00195 11.211 5.79695 13.006 8.00195 13.006ZM8.00195 14.006C3.29095 14.006 0.00195312 16.473 0.00195312 20.006V21.006H16.002V20.006C16.002 16.473 12.713 14.006 8.00195 14.006Z"}})])])])])])},Y=[],K={name:"FriendButton",props:{friend:{type:Object,default(){return{}}},request:{type:Boolean,default:!1}}},X=K,ee=(s("e904"),Object(m["a"])(X,W,Y,!1,null,"261ad3fe",null)),te=ee.exports,se={name:"Friends",components:{FriendButton:te},computed:{friends(){return this.objectToArray(this.$store.state.user.friends)},friendRequests(){return this.objectToArray(this.$store.state.user.friendRequests)}},methods:{answerRequest(e){this.$store.state.socket.emit("answer-friend-request",{userId:e.friend.userId,accept:e.accept})},removeFriend(e){this.$store.state.socket.emit("remove-friend",e.userId)},openChat(e){this.$router.push({name:"Chat",params:{friend:`${e.username}-${e.hash}`}});const t=this.$store.state.user.userId,s=e.initator?e.userId+t:t+e.userId;this.$store.commit("SET_CURRENT_CHAT",{chatId:s,userId:e.userId})},objectToArray(e){const t=[];for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.push(e[s]);return t}}},re=se,ie=(s("983a"),Object(m["a"])(re,G,J,!1,null,"08b90785",null)),ae=ie.exports,ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{attrs:{id:"add-friend"}},[r("div",{staticClass:"top"},[r("h1",{staticClass:"title"},[e._v("ADD FRIEND")]),r("router-link",{staticClass:"close",attrs:{to:"/"}},[r("img",{attrs:{src:s("d12f"),alt:""}})])],1),r("p",[e._v("You can add a friend with their Discord Tag. It's cAsE sEnSitIvE!")]),r("form",{staticClass:"input",on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.username,expression:"username",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"Enter a Username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),r("button",{attrs:{type:"submit"}},[e._v("Send Friend Request")])]),e.responseRecieved?r("div",{staticClass:"message",class:{success:e.response.code<400}},[r("p",[e._v(e._s(e.response.message))])]):e._e()])},oe=[],ce={name:"AddFriend",data(){return{username:"",response:{},responseRecieved:!1}},methods:{validate(){if(this.username.match(/^((.+?)#\d{4})/)){const e=this.username.split("#")[0],t=this.username.split("#")[1].slice(0,4);this.addFriend(e,t)}else this.response={message:"Please enter a valid username e.g. Freddie#1234",code:400},this.responseRecieved=!0},addFriend(e,t){this.$store.state.socket.on("add-friend-response",e=>{this.responseRecieved=!0,this.response={message:e.message,code:e.error?400:200}}),this.$store.state.socket.emit("add-friend",{username:e,hash:t})}}},le=ce,ue=(s("d6d5"),Object(m["a"])(le,ne,oe,!1,null,"57d73c9a",null)),de=ue.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{attrs:{id:"chat"}},[s("div",{staticClass:"chat-container"},[s("div",{staticClass:"chat-list"},[s("div",{staticClass:"scroll-spacer",staticStyle:{"margin-bottom":"25px"}}),e._l(e.messages,(function(t,r){return s("ChatItem",{key:t.id,attrs:{message:t,"no-icon":!!e.messages[r-1]&&(e.messages[r-1].user.id===t.user.id&&t.timestamp-e.messages[r-1].timestamp<=120)}})})),s("div",{staticClass:"scroll-spacer"})],2)]),s("MessageBox",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)}},model:{value:e.message,callback:function(t){e.message="string"===typeof t?t.trim():t},expression:"message"}})],1)},he=[],pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-box-container"},[s("div",{staticClass:"message-box"},[s("input",{ref:"fileInput",staticClass:"file",attrs:{type:"file"}}),s("button",{staticClass:"file-btn",on:{click:function(t){return e.$refs.fileInput.click()}}},[e._m(0)]),s("input",{staticClass:"input",attrs:{type:"text",placeholder:"Type your message..."},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])])},fe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"icon"},[r("img",{attrs:{src:s("d12f"),alt:""}})])}],ve={name:"MessageBox",props:{value:{type:String,default:""}}},ge=ve,Ce=(s("07ee"),Object(m["a"])(ge,pe,fe,!1,null,"36ce5577",null)),_e=Ce.exports,be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat-item",class:{"no-icon":e.noIcon}},[s("div",{staticClass:"icon"},[e._v(" "+e._s(e.message.user.name[0])+" ")]),s("div",{staticClass:"content"},[s("h3",{staticClass:"name"},[e._v(" "+e._s(e.message.user.name)+" "),s("span",{staticClass:"timestamp"},[e._v(e._s(e.timeago))])]),s("p",{staticClass:"message"},[e._v(e._s(e.message.text))])])])},we=[],ye=s("c72b"),Ee={name:"ChatItem",props:{message:{type:Object,default(){return{}}},noIcon:{type:Boolean,default:!1}},data(){return{timeago:"",refreshTimestampInterval:null}},methods:{format(e){return Object(ye["a"])(e)}},mounted(){this.timeago=this.format(this.message.timestamp),this.refreshTimestampInterval=setInterval(()=>{this.timeago=this.format(this.message.timestamp)},3e3)},beforeDestroy(){clearInterval(this.refreshTimestampInterval)}},$e=Ee,Ie=(s("d505"),Object(m["a"])($e,be,we,!1,null,"45daec54",null)),Se=Ie.exports,Te={name:"Chat",components:{MessageBox:_e,ChatItem:Se},data(){return{message:""}},computed:{messages(){return this.$store.state.messages[this.chatId]||[]},from(){return{userId:this.$store.state.user.userId,initiator:!this.$store.state.user.friends[this.$store.state.chat.userId].initiator}},to(){return{userId:this.$store.state.chat.userId}},chatId(){return this.$store.state.chat.chatId}},methods:{sendMessage(){this.message&&(this.$store.state.socket.emit("send-message",{from:this.from,to:this.to,message:this.message}),this.message="")},fetchMessages(){this.$store.state.socket.emit("fetch-messages",{from:this.from,to:this.to})}},beforeDestroy(){this.$store.commit("SET_CURRENT_CHAT",{chatId:null,userId:null})},mounted(){this.fetchMessages()}},Re=Te,xe=(s("e423"),Object(m["a"])(Re,me,he,!1,null,"f3fdb738",null)),Oe=xe.exports,Ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{attrs:{id:"auth"}},[e.register?s("div",{staticClass:"register"},[s("h1",[e._v("Create an Account")]),s("form",{on:{submit:function(t){return t.preventDefault(),e.registerUser(t)}}},[s("label",{attrs:{for:"username"}},[e._v("USERNAME")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.user.username,expression:"user.username",modifiers:{trim:!0}}],staticClass:"username",attrs:{required:"",minlength:"4",maxlength:"28",type:"username",name:"username"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("label",{attrs:{for:"email"}},[e._v("EMAIL")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.user.email,expression:"user.email",modifiers:{trim:!0}}],staticClass:"email",attrs:{required:"",minlength:"5",maxlength:"320",type:"email",name:"email",placeholder:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("label",{attrs:{for:"password"}},[e._v("PASSWORD")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"password",attrs:{required:"",minlength:"6",maxlength:"256",type:"password",name:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),s("button",{key:"register",staticClass:"submit-btn",attrs:{type:"submit"}},[e._v("Create Account")]),s("p",[e._v("Already have an account? "),s("button",{on:{click:e.switchView}},[e._v("Sign In")])])]),e.responseRecieved?s("div",{staticClass:"message",class:{success:e.response.code<400}},[s("p",[e._v(e._s(e.response.message))])]):e._e()]):s("div",{staticClass:"login"},[s("h1",[e._v("Welcome back!")]),s("h2",[e._v("We're so excited to see you again!")]),s("form",{on:{submit:function(t){return t.preventDefault(),e.signInUser(t)}}},[s("label",{attrs:{for:"username"}},[e._v("EMAIL")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"email",attrs:{required:"",minlength:"5",maxlength:"320",type:"email",name:"email",placeholder:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),s("label",{attrs:{for:"password"}},[e._v("PASSWORD")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"password",attrs:{minlength:"6",maxlength:"256",type:"password",name:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),s("button",{key:"sign-in",staticClass:"submit-btn",attrs:{type:"submit"}},[e._v("Sign In")]),s("p",[e._v("Need an account? "),s("button",{key:"switch-to-register",on:{click:e.switchView}},[e._v("Register")])])]),e.responseRecieved?s("div",{staticClass:"message",class:{success:e.response.code<400}},[s("p",[e._v(e._s(e.response.message))])]):e._e()])])},Me=[],Ae={name:"Auth",data(){return{register:!1,response:{},responseRecieved:!1,user:{username:"",email:"",password:""}}},methods:{async registerUser(){const e=this.user;if(!this.user.username.match(/^(.+?)/))return void(this.response={message:"Invalid username: Username must only contain alpha numeric characters.",code:400});const t=await fetch(this.$store.state.SERVER_URL+"/auth/register",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(e=>console.log(e)),s=await t.text();this.response={message:s,code:t.status},this.responseRecieved=!0,201===t.status&&this.signInUser()},async signInUser(){const e={email:this.user.email,password:this.user.password},t=await fetch(this.$store.state.SERVER_URL+"/auth/login",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(e=>console.log(e)),s=await t.text();this.response={message:s,code:t.status},this.responseRecieved=!0,200===t.status&&window.location.assign(window.location.origin)},switchView(){this.user={username:"",email:"",password:""},this.register=!this.register,this.response={},this.responseRecieved=!1}}},ke=Ae,De=(s("3a72"),Object(m["a"])(ke,Ve,Me,!1,null,"285ca0ae",null)),je=De.exports;r["a"].use(Z["a"]);const Le=[{path:"/login",name:"Auth",component:je},{path:"/",name:"Friends",component:ae},{path:"/add-friend",name:"AddFriend",component:de},{path:"/chat/:friend",name:"Chat",component:Oe}],qe=new Z["a"]({mode:"history",routes:Le});var He=qe,ze=s("2f62");r["a"].use(ze["a"]);var Be=new ze["a"].Store({state:{user:{},messages:{},chat:{chatId:null,userId:null},toastQueue:[]},mutations:{SET_USER(e,t){e.user=t},ADD_FRIEND_REQUEST(e,t){const s={...e.user};s.friendRequests||(s.friendRequests={}),s.friendRequests[t.userId]=t,e.user=s},ADD_TOAST(e,t){const s=e.toastQueue;s.push(t),e.toastQueue=s},ADD_FRIEND(e,t){const s={...e.user};s.friends||(s.friends={}),s.friends[t.userId]=t,t.initiator&&delete s.friendRequests[t.userId],e.user=s},REMOVE_FRIEND_REQUEST(e,t){const s={...e.user};try{delete s.friendRequests[t.userId]}catch{return}e.user=s},REMOVE_FRIEND(e,t){const s={...e.user};try{delete s.friends[t]}catch{return}e.user=s},SET_TOAST_QUEUE(e,t){e.toastQueue=t},SET_CURRENT_CHAT(e,{chatId:t,userId:s}){e.chat.chatId=t,e.chat.userId=s},RECEIVE_MESSAGE(e,t){const s={...e.messages},r=t.userId===e.user.userId?e.user.username:e.user.friends[t.userId].username,i={user:{name:r},id:t.id,text:t.text,timestamp:t.timestamp};s[t.chatId]?s[t.chatId].push(i):s[t.chatId]=[i],e.messages=s},SET_MESSAGES(e,t){const s={...e.messages},r=t.logs.map(t=>{const s=t.userId===e.user.userId?e.user.username:e.user.friends[t.userId].username;return{user:{name:s},id:t.id,text:t.text,timestamp:t.timestamp}});s[t.chatId]=r,e.messages=s,e.chat={...e.chat,chatId:t.chatId}}},actions:{},modules:{}});s("eead");r["a"].config.productionTip=!1,new r["a"]({router:He,store:Be,render:e=>e(Q)}).$mount("#app")},b278:function(e,t,s){},b924:function(e,t,s){"use strict";s("01d2")},cbe1:function(e,t,s){},d12f:function(e,t,s){e.exports=s.p+"img/plus.b85664a6.svg"},d505:function(e,t,s){"use strict";s("87f6")},d6d5:function(e,t,s){"use strict";s("d733")},d733:function(e,t,s){},dd5c:function(e,t,s){},e423:function(e,t,s){"use strict";s("b278")},e559:function(e,t,s){},e904:function(e,t,s){"use strict";s("739e")},ed0c:function(e,t,s){"use strict";s("81d7")},eead:function(e,t,s){},f777:function(e,t,s){"use strict";s("9697")}});
//# sourceMappingURL=index.4d9cfc55.js.map